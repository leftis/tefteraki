/*
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
(function(){function u(i,s,o){var u=r[this.id];if(!u)return;var a=this instanceof CKEDITOR.ui.dialog.checkbox;for(var f=0;f<u.length;f++){var l=u[f];switch(l.type){case e:if(!i)continue;if(i.getAttribute(l.name)!==null){var c=i.getAttribute(l.name);a?this.setValue(c.toLowerCase()=="true"):this.setValue(c);return}a&&this.setValue(!!l["default"]);break;case t:if(!i)continue;if(l.name in o){c=o[l.name],a?this.setValue(c.toLowerCase()=="true"):this.setValue(c);return}a&&this.setValue(!!l["default"]);break;case n:if(!s)continue;if(s.getAttribute(l.name)){c=s.getAttribute(l.name),a?this.setValue(c.toLowerCase()=="true"):this.setValue(c);return}a&&this.setValue(!!l["default"])}}}function a(i,s,o){var u=r[this.id];if(!u)return;var a=this.getValue()==="",f=this instanceof CKEDITOR.ui.dialog.checkbox;for(var l=0;l<u.length;l++){var c=u[l];switch(c.type){case e:if(!i||c.name=="data"&&s&&!i.hasAttribute("data"))continue;var h=this.getValue();a||f&&h===c["default"]?i.removeAttribute(c.name):i.setAttribute(c.name,h);break;case t:if(!i)continue;h=this.getValue();if(a||f&&h===c["default"])c.name in o&&o[c.name].remove();else if(c.name in o)o[c.name].setAttribute("value",h);else{var p=CKEDITOR.dom.element.createFromHtml("<cke:param></cke:param>",i.getDocument());p.setAttributes({name:c.name,value:h}),i.getChildCount()<1?p.appendTo(i):p.insertBefore(i.getFirst())}break;case n:if(!s)continue;h=this.getValue(),a||f&&h===c["default"]?s.removeAttribute(c.name):s.setAttribute(c.name,h)}}}var e=1,t=2,n=4,r={id:[{type:e,name:"id"}],classid:[{type:e,name:"classid"}],codebase:[{type:e,name:"codebase"}],pluginspage:[{type:n,name:"pluginspage"}],src:[{type:t,name:"movie"},{type:n,name:"src"},{type:e,name:"data"}],name:[{type:n,name:"name"}],align:[{type:e,name:"align"}],"class":[{type:e,name:"class"},{type:n,name:"class"}],width:[{type:e,name:"width"},{type:n,name:"width"}],height:[{type:e,name:"height"},{type:n,name:"height"}],hSpace:[{type:e,name:"hSpace"},{type:n,name:"hSpace"}],vSpace:[{type:e,name:"vSpace"},{type:n,name:"vSpace"}],style:[{type:e,name:"style"},{type:n,name:"style"}],type:[{type:n,name:"type"}]},i=["play","loop","menu","quality","scale","salign","wmode","bgcolor","base","flashvars","allowScriptAccess","allowFullScreen"];for(var s=0;s<i.length;s++)r[i[s]]=[{type:n,name:i[s]},{type:t,name:i[s]}];i=["allowFullScreen","play","loop","menu"];for(s=0;s<i.length;s++)r[i[s]][0]["default"]=r[i[s]][1]["default"]=!0;var o=CKEDITOR.tools.cssLength;CKEDITOR.dialog.add("flash",function(e){var t=!e.config.flashEmbedTagOnly,n=e.config.flashAddEmbedTag||e.config.flashEmbedTagOnly,r,i="<div>"+CKEDITOR.tools.htmlEncode(e.lang.common.preview)+"<br>"+'<div id="cke_FlashPreviewLoader'+CKEDITOR.tools.getNextNumber()+'" style="display:none"><div class="loading">&nbsp;</div></div>'+'<div id="cke_FlashPreviewBox'+CKEDITOR.tools.getNextNumber()+'" class="FlashPreviewBox"></div></div>';return{title:e.lang.flash.title,minWidth:420,minHeight:310,onShow:function(){this.fakeImage=this.objectNode=this.embedNode=null,r=new CKEDITOR.dom.element("embed",e.document);var t=this.getSelectedElement();if(t&&t.data("cke-real-element-type")&&t.data("cke-real-element-type")=="flash"){this.fakeImage=t;var n=e.restoreRealElement(t),i=null,s=null,o={};if(n.getName()=="cke:object"){i=n;var u=i.getElementsByTag("embed","cke");u.count()>0&&(s=u.getItem(0));var a=i.getElementsByTag("param","cke");for(var f=0,l=a.count();f<l;f++){var c=a.getItem(f),h=c.getAttribute("name"),p=c.getAttribute("value");o[h]=p}}else n.getName()=="cke:embed"&&(s=n);this.objectNode=i,this.embedNode=s,this.setupContent(i,s,o,t)}},onOk:function(){var r=null,i=null,s=null;if(!this.fakeImage){if(t){r=CKEDITOR.dom.element.createFromHtml("<cke:object></cke:object>",e.document);var o={classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"};r.setAttributes(o)}n&&(i=CKEDITOR.dom.element.createFromHtml("<cke:embed></cke:embed>",e.document),i.setAttributes({type:"application/x-shockwave-flash",pluginspage:"http://www.macromedia.com/go/getflashplayer"}),r&&i.appendTo(r))}else r=this.objectNode,i=this.embedNode;if(r){s={};var u=r.getElementsByTag("param","cke");for(var a=0,f=u.count();a<f;a++)s[u.getItem(a).getAttribute("name")]=u.getItem(a)}var l={},c={};this.commitContent(r,i,s,l,c);var h=e.createFakeElement(r||i,"cke_flash","flash",!0);h.setAttributes(c),h.setStyles(l),this.fakeImage?(h.replace(this.fakeImage),e.getSelection().selectElement(h)):e.insertElement(h)},onHide:function(){this.preview&&this.preview.setHtml("")},contents:[{id:"info",label:e.lang.common.generalTab,accessKey:"I",elements:[{type:"vbox",padding:0,children:[{type:"hbox",widths:["280px","110px"],align:"right",children:[{id:"src",type:"text",label:e.lang.common.url,required:!0,validate:CKEDITOR.dialog.validate.notEmpty(e.lang.flash.validateSrc),setup:u,commit:a,onLoad:function(){var e=this.getDialog(),t=function(t){r.setAttribute("src",t),e.preview.setHtml('<embed height="100%" width="100%" src="'+CKEDITOR.tools.htmlEncode(r.getAttribute("src"))+'" type="application/x-shockwave-flash"></embed>')};e.preview=e.getContentElement("info","preview").getElement().getChild(3),this.on("change",function(e){e.data&&e.data.value&&t(e.data.value)}),this.getInputElement().on("change",function(e){t(this.getValue())},this)}},{type:"button",id:"browse",filebrowser:"info:src",hidden:!0,style:"display:inline-block;margin-top:10px;",label:e.lang.common.browseServer}]}]},{type:"hbox",widths:["25%","25%","25%","25%","25%"],children:[{type:"text",id:"width",style:"width:95px",label:e.lang.common.width,validate:CKEDITOR.dialog.validate.htmlLength(e.lang.common.invalidHtmlLength.replace("%1",e.lang.common.width)),setup:u,commit:a},{type:"text",id:"height",style:"width:95px",label:e.lang.common.height,validate:CKEDITOR.dialog.validate.htmlLength(e.lang.common.invalidHtmlLength.replace("%1",e.lang.common.height)),setup:u,commit:a},{type:"text",id:"hSpace",style:"width:95px",label:e.lang.flash.hSpace,validate:CKEDITOR.dialog.validate.integer(e.lang.flash.validateHSpace),setup:u,commit:a},{type:"text",id:"vSpace",style:"width:95px",label:e.lang.flash.vSpace,validate:CKEDITOR.dialog.validate.integer(e.lang.flash.validateVSpace),setup:u,commit:a}]},{type:"vbox",children:[{type:"html",id:"preview",style:"width:95%;",html:i}]}]},{id:"Upload",hidden:!0,filebrowser:"uploadButton",label:e.lang.common.upload,elements:[{type:"file",id:"upload",label:e.lang.common.upload,size:38},{type:"fileButton",id:"uploadButton",label:e.lang.common.uploadSubmit,filebrowser:"info:src","for":["Upload","upload"]}]},{id:"properties",label:e.lang.flash.propertiesTab,elements:[{type:"hbox",widths:["50%","50%"],children:[{id:"scale",type:"select",label:e.lang.flash.scale,"default":"",style:"width : 100%;",items:[[e.lang.common.notSet,""],[e.lang.flash.scaleAll,"showall"],[e.lang.flash.scaleNoBorder,"noborder"],[e.lang.flash.scaleFit,"exactfit"]],setup:u,commit:a},{id:"allowScriptAccess",type:"select",label:e.lang.flash.access,"default":"",style:"width : 100%;",items:[[e.lang.common.notSet,""],[e.lang.flash.accessAlways,"always"],[e.lang.flash.accessSameDomain,"samedomain"],[e.lang.flash.accessNever,"never"]],setup:u,commit:a}]},{type:"hbox",widths:["50%","50%"],children:[{id:"wmode",type:"select",label:e.lang.flash.windowMode,"default":"",style:"width : 100%;",items:[[e.lang.common.notSet,""],[e.lang.flash.windowModeWindow,"window"],[e.lang.flash.windowModeOpaque,"opaque"],[e.lang.flash.windowModeTransparent,"transparent"]],setup:u,commit:a},{id:"quality",type:"select",label:e.lang.flash.quality,"default":"high",style:"width : 100%;",items:[[e.lang.common.notSet,""],[e.lang.flash.qualityBest,"best"],[e.lang.flash.qualityHigh,"high"],[e.lang.flash.qualityAutoHigh,"autohigh"],[e.lang.flash.qualityMedium,"medium"],[e.lang.flash.qualityAutoLow,"autolow"],[e.lang.flash.qualityLow,"low"]],setup:u,commit:a}]},{type:"hbox",widths:["50%","50%"],children:[{id:"align",type:"select",label:e.lang.common.align,"default":"",style:"width : 100%;",items:[[e.lang.common.notSet,""],[e.lang.common.alignLeft,"left"],[e.lang.flash.alignAbsBottom,"absBottom"],[e.lang.flash.alignAbsMiddle,"absMiddle"],[e.lang.flash.alignBaseline,"baseline"],[e.lang.common.alignBottom,"bottom"],[e.lang.common.alignMiddle,"middle"],[e.lang.common.alignRight,"right"],[e.lang.flash.alignTextTop,"textTop"],[e.lang.common.alignTop,"top"]],setup:u,commit:function(e,t,n,r,i){var s=this.getValue();a.apply(this,arguments),s&&(i.align=s)}},{type:"html",html:"<div></div>"}]},{type:"fieldset",label:CKEDITOR.tools.htmlEncode(e.lang.flash.flashvars),children:[{type:"vbox",padding:0,children:[{type:"checkbox",id:"menu",label:e.lang.flash.chkMenu,"default":!0,setup:u,commit:a},{type:"checkbox",id:"play",label:e.lang.flash.chkPlay,"default":!0,setup:u,commit:a},{type:"checkbox",id:"loop",label:e.lang.flash.chkLoop,"default":!0,setup:u,commit:a},{type:"checkbox",id:"allowFullScreen",label:e.lang.flash.chkFull,"default":!0,setup:u,commit:a}]}]}]},{id:"advanced",label:e.lang.common.advancedTab,elements:[{type:"hbox",children:[{type:"text",id:"id",label:e.lang.common.id,setup:u,commit:a}]},{type:"hbox",widths:["45%","55%"],children:[{type:"text",id:"bgcolor",label:e.lang.flash.bgcolor,setup:u,commit:a},{type:"text",id:"class",label:e.lang.common.cssClass,setup:u,commit:a}]},{type:"text",id:"style",validate:CKEDITOR.dialog.validate.inlineStyle(e.lang.common.invalidInlineStyle),label:e.lang.common.cssStyle,setup:u,commit:a}]}]}})})();