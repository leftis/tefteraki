/*
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
(function(){function t(t){var n=t.attributes;return n.type=="application/x-shockwave-flash"||e.test(n.src||"")}function n(e,t){return e.createFakeParserElement(t,"cke_flash","flash",!0)}var e=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{init:function(e){e.addCommand("flash",new CKEDITOR.dialogCommand("flash")),e.ui.addButton("Flash",{label:e.lang.common.flash,command:"flash"}),CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js"),e.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");"+"background-position: center center;"+"background-repeat: no-repeat;"+"border: 1px solid #a9a9a9;"+"width: 80px;"+"height: 80px;"+"}"),e.addMenuItems&&e.addMenuItems({flash:{label:e.lang.flash.properties,command:"flash",group:"flash"}}),e.on("doubleclick",function(e){var t=e.data.element;t.is("img")&&t.data("cke-real-element-type")=="flash"&&(e.data.dialog="flash")}),e.contextMenu&&e.contextMenu.addListener(function(e,t){if(e&&e.is("img")&&!e.isReadOnly()&&e.data("cke-real-element-type")=="flash")return{flash:CKEDITOR.TRISTATE_OFF}})},afterInit:function(e){var r=e.dataProcessor,i=r&&r.dataFilter;i&&i.addRules({elements:{"cke:object":function(r){var i=r.attributes,s=i.classid&&String(i.classid).toLowerCase();if(!s&&!t(r)){for(var o=0;o<r.children.length;o++)if(r.children[o].name=="cke:embed")return t(r.children[o])?n(e,r):null;return null}return n(e,r)},"cke:embed":function(r){return t(r)?n(e,r):null}}},5)},requires:["fakeobjects"]})})(),CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1});