/*
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
CKEDITOR.plugins.add("resize",{init:function(e){var t=e.config,n=e.element.getDirection(1);!t.resize_dir&&(t.resize_dir="both"),t.resize_maxWidth==undefined&&(t.resize_maxWidth=3e3),t.resize_maxHeight==undefined&&(t.resize_maxHeight=3e3),t.resize_minWidth==undefined&&(t.resize_minWidth=750),t.resize_minHeight==undefined&&(t.resize_minHeight=250);if(t.resize_enabled!==!1){var r=null,i,s,o=(t.resize_dir=="both"||t.resize_dir=="horizontal")&&t.resize_minWidth!=t.resize_maxWidth,u=(t.resize_dir=="both"||t.resize_dir=="vertical")&&t.resize_minHeight!=t.resize_maxHeight;function a(r){var a=r.data.$.screenX-i.x,f=r.data.$.screenY-i.y,l=s.width,c=s.height,h=l+a*(n=="rtl"?-1:1),p=c+f;o&&(l=Math.max(t.resize_minWidth,Math.min(h,t.resize_maxWidth))),u&&(c=Math.max(t.resize_minHeight,Math.min(p,t.resize_maxHeight))),e.resize(o?l:null,c)}function f(t){CKEDITOR.document.removeListener("mousemove",a),CKEDITOR.document.removeListener("mouseup",f),e.document&&(e.document.removeListener("mousemove",a),e.document.removeListener("mouseup",f))}var l=CKEDITOR.tools.addFunction(function(n){r||(r=e.getResizable()),s={width:r.$.offsetWidth||0,height:r.$.offsetHeight||0},i={x:n.screenX,y:n.screenY},t.resize_minWidth>s.width&&(t.resize_minWidth=s.width),t.resize_minHeight>s.height&&(t.resize_minHeight=s.height),CKEDITOR.document.on("mousemove",a),CKEDITOR.document.on("mouseup",f),e.document&&(e.document.on("mousemove",a),e.document.on("mouseup",f))});e.on("destroy",function(){CKEDITOR.tools.removeFunction(l)}),e.on("themeSpace",function(t){if(t.data.space=="bottom"){var r="";o&&!u&&(r=" cke_resizer_horizontal"),!o&&u&&(r=" cke_resizer_vertical");var i='<div class="cke_resizer'+r+" cke_resizer_"+n+'"'+' title="'+CKEDITOR.tools.htmlEncode(e.lang.resize)+'"'+' onmousedown="CKEDITOR.tools.callFunction('+l+', event)"'+"></div>";n=="ltr"&&r=="ltr"?t.data.html+=i:t.data.html=i+t.data.html}},e,null,100)}}});