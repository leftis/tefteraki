/*
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
/**
 * @fileOverview The "toolbar" plugin. Renders the default toolbar interface in
 * the editor.
 */
(function(){var e=function(){this.toolbars=[],this.focusCommandExecuted=!1};e.prototype.focus=function(){for(var e=0,t;t=this.toolbars[e++];)for(var n=0,r;r=t.items[n++];)if(r.focus){r.focus();return}};var t={toolbarFocus:{modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){e.toolbox.focus()},100):e.toolbox.focus())}}};CKEDITOR.plugins.add("toolbar",{requires:["button"],init:function(n){var r,i=function(e,t){var s,o,u=n.lang.dir=="rtl",a=n.config.toolbarGroupCycling;a=a===undefined||a;switch(t){case 9:case CKEDITOR.SHIFT+9:while(!o||!o.items.length){o=t==9?(o?o.next:e.toolbar.next)||n.toolbox.toolbars[0]:(o?o.previous:e.toolbar.previous)||n.toolbox.toolbars[n.toolbox.toolbars.length-1];if(o.items.length){e=o.items[r?o.items.length-1:0];while(e&&!e.focus)e=r?e.previous:e.next,e||(o=0)}}return e&&e.focus(),!1;case u?37:39:case 40:s=e;do s=s.next,!s&&a&&(s=e.toolbar.items[0]);while(s&&!s.focus);return s?s.focus():i(e,9),!1;case u?39:37:case 38:s=e;do s=s.previous,!s&&a&&(s=e.toolbar.items[e.toolbar.items.length-1]);while(s&&!s.focus);return s?s.focus():(r=1,i(e,CKEDITOR.SHIFT+9),r=0),!1;case 27:return n.focus(),!1;case 13:case 32:return e.execute(),!1}return!0};n.on("themeSpace",function(t){if(t.data.space==n.config.toolbarLocation){n.toolbox=new e;var r=CKEDITOR.tools.getNextId(),s=['<div class="cke_toolbox" role="group" aria-labelledby="',r,'" onmousedown="return false;"'],o=n.config.toolbarStartupExpanded!==!1,u;s.push(o?">":' style="display:none">'),s.push('<span id="',r,'" class="cke_voice_label">',n.lang.toolbars,"</span>");var a=n.toolbox.toolbars,f=n.config.toolbar instanceof Array?n.config.toolbar:n.config["toolbar_"+n.config.toolbar];for(var l=0;l<f.length;l++){var c,h=0,p,d=f[l],v;if(!d)continue;u&&(s.push("</div>"),u=0);if(d==="/"){s.push('<div class="cke_break"></div>');continue}v=d.items||d;for(var m=0;m<v.length;m++){var g,y=v[m],b;g=n.ui.create(y);if(g){b=g.canGroup!==!1;if(!h){c=CKEDITOR.tools.getNextId(),h={id:c,items:[]},p=d.name&&(n.lang.toolbarGroups[d.name]||d.name),s.push('<span id="',c,'" class="cke_toolbar"',p?' aria-labelledby="'+c+'_label"':"",' role="toolbar">'),p&&s.push('<span id="',c,'_label" class="cke_voice_label">',p,"</span>"),s.push('<span class="cke_toolbar_start"></span>');var w=a.push(h)-1;w>0&&(h.previous=a[w-1],h.previous.next=h)}b?u||(s.push('<span class="cke_toolgroup" role="presentation">'),u=1):u&&(s.push("</span>"),u=0);var E=g.render(n,s);w=h.items.push(E)-1,w>0&&(E.previous=h.items[w-1],E.previous.next=E),E.toolbar=h,E.onkey=i,E.onfocus=function(){n.toolbox.focusCommandExecuted||n.focus()}}}u&&(s.push("</span>"),u=0),h&&s.push('<span class="cke_toolbar_end"></span></span>')}s.push("</div>");if(n.config.toolbarCanCollapse){var S=CKEDITOR.tools.addFunction(function(){n.execCommand("toolbarCollapse")});n.on("destroy",function(){CKEDITOR.tools.removeFunction(S)});var x=CKEDITOR.tools.getNextId();n.addCommand("toolbarCollapse",{readOnly:1,exec:function(e){var t=CKEDITOR.document.getById(x),n=t.getPrevious(),r=e.getThemeSpace("contents"),i=n.getParent(),s=parseInt(r.$.style.height,10),o=i.$.offsetHeight,u=!n.isVisible();u?(n.show(),t.removeClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbarCollapse)):(n.hide(),t.addClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbarExpand)),t.getFirst().setText(u?"▲":"◀");var a=i.$.offsetHeight-o;r.setStyle("height",s-a+"px"),e.fire("resize")},modes:{wysiwyg:1,source:1}}),s.push('<a title="'+(o?n.lang.toolbarCollapse:n.lang.toolbarExpand)+'" id="'+x+'" tabIndex="-1" class="cke_toolbox_collapser'),o||s.push(" cke_toolbox_collapser_min"),s.push('" onclick="CKEDITOR.tools.callFunction('+S+')">',"<span>&#9650;</span>","</a>")}t.data.html+=s.join("")}}),n.on("destroy",function(){var e,t=0,n,r,i;e=this.toolbox.toolbars;for(;t<e.length;t++){r=e[t].items;for(n=0;n<r.length;n++)i=r[n],i.clickFn&&CKEDITOR.tools.removeFunction(i.clickFn),i.keyDownFn&&CKEDITOR.tools.removeFunction(i.keyDownFn)}}),n.addCommand("toolbarFocus",t.toolbarFocus),n.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),n.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(e,t){return t.push('<span class="cke_separator" role="separator"></span>'),{}}}}})}})})(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",CKEDITOR.config.toolbar_Basic=[["Bold","Italic","-","NumberedList","BulletedList","-","Link","Unlink","-","About"]],CKEDITOR.config.toolbar_Full=[{name:"document",items:["Source","-","Save","NewPage","DocProps","Preview","Print","-","Templates"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Find","Replace","-","SelectAll","-","SpellChecker","Scayt"]},{name:"forms",items:["Form","Checkbox","Radio","TextField","Textarea","Select","Button","ImageButton","HiddenField"]},"/",{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","CreateDiv","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["Image","Flash","Table","HorizontalRule","Smiley","SpecialChar","PageBreak","Iframe"]},"/",{name:"styles",items:["Styles","Format","Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize","ShowBlocks","-","About"]}],CKEDITOR.config.toolbar="Full",CKEDITOR.config.toolbarCanCollapse=!0;